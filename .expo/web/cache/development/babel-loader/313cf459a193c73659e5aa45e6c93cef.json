{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/skyfighttv/Documents/GitHub/TFC/src/project/objects/Objects.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Members, { DATA, refresh } from \"../membres/Members\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport CheckBox from \"@react-native-community/checkbox\";\nexport var PLATS = [];\n\nvar Objects = function (_React$Component) {\n  _inherits(Objects, _React$Component);\n\n  var _super = _createSuper(Objects);\n\n  function Objects(props) {\n    var _this;\n\n    _classCallCheck(this, Objects);\n\n    _this = _super.call(this, props);\n\n    _this.membersItem = function (_ref) {\n      var item = _ref.item;\n      return React.createElement(TouchableHighlight, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.title,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, React.createElement(CheckBox, {\n        onValueChange: function onValueChange() {\n          return _this.checkBox(item);\n        },\n        value: _this.state.members.includes(item.id),\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, item.name)));\n    };\n\n    _this.renderItem = function (_ref2) {\n      var item = _ref2.item;\n      var members = \"\";\n\n      for (var id in item.members) {\n        members += DATA[id].name + \", \";\n      }\n\n      members = members.substr(0, members.length - 2);\n      return React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return _this.initModal(\"Modifier un plat\", item.id);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.title,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, item.name), React.createElement(Text, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, members), React.createElement(Text, {\n        style: styles.item,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      }, item.amount, \"\\u20AC\")));\n    };\n\n    _this.state = {\n      title: \"NULL\",\n      id: 0,\n      name: \"\",\n      amount: 0,\n      members: [],\n      show: false,\n      refresh: false\n    };\n    return _this;\n  }\n\n  _createClass(Objects, [{\n    key: \"initModal\",\n    value: function initModal(title, id) {\n      this.setState({\n        title: title,\n        id: id,\n        name: PLATS.length > id ? PLATS[id].name : \"\",\n        amount: PLATS.length > id ? PLATS[id].amount : 0,\n        members: PLATS.length > id ? PLATS[id].members : [],\n        show: true,\n        refresh: !this.state.refresh\n      });\n    }\n  }, {\n    key: \"removeModal\",\n    value: function removeModal(id, save) {\n      if (save) {\n        PLATS[id] = {\n          id: id,\n          name: this.state.name,\n          amount: this.state.amount,\n          members: this.state.members\n        };\n      } else PLATS.splice(id, 1);\n\n      this.setState({\n        members: [],\n        show: false,\n        refresh: !this.state.refresh\n      });\n      calculatePrice();\n    }\n  }, {\n    key: \"checkBox\",\n    value: function checkBox(item) {\n      if (this.state.members.includes(item.id)) this.state.members.splice(this.state.members.findIndex(checkIndex, item.id) - 1, 1);else this.state.members[this.state.members.length] = item.id;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(SafeAreaView, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, React.createElement(Button, {\n        title: \"Ajout\\xE9 un nouveau Plat\",\n        onPress: function onPress() {\n          return _this2.initModal(\"Ajouté un plat\", PLATS.length);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }), React.createElement(FlatList, {\n        ListEmptyComponent: React.createElement(Text, {\n          style: styles.modal.text1,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }\n        }, \"Aucun plats\"),\n        style: styles.flat_list,\n        data: PLATS,\n        renderItem: this.renderItem,\n        extraData: this.state.refresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }), React.createElement(Modal, {\n        presentationStyle: \"overFullScreen\",\n        animationType: \"fade\",\n        transparent: true,\n        visible: this.state.show,\n        style: styles.modal.this,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.modal.first,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.modal.text1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      }, this.state.title), React.createElement(TextInput, {\n        placeholder: \"Nom du plat\",\n        style: styles.textInput,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            name: text\n          });\n        },\n        value: this.state.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }\n      }), React.createElement(TextInput, {\n        placeholder: \"Prix du plat\",\n        keyboardType: \"number-pad\",\n        style: styles.amountInput,\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            amount: text === \"\" ? \"\" : parseFloat(text)\n          });\n        },\n        value: this.state.amount === 0 ? \"\" : this.state.amount + \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: styles.modal.text2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      }, \"Membres\"), React.createElement(FlatList, {\n        ListEmptyComponent: React.createElement(Text, {\n          style: styles.modal.text1,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 37\n          }\n        }, \"Aucun membres\"),\n        data: DATA,\n        renderItem: this.membersItem,\n        style: styles.modal.flat_list,\n        extraData: this.state.refresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: styles.modal.second,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }\n      }, React.createElement(Button, {\n        title: \"Supprimer\",\n        onPress: function onPress() {\n          return _this2.removeModal(_this2.state.id, false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 29\n        }\n      }), React.createElement(Button, {\n        title: \"Enregistrer\",\n        onPress: function onPress() {\n          return _this2.removeModal(_this2.state.id, true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }\n      })))));\n    }\n  }]);\n\n  return Objects;\n}(React.Component);\n\nfunction checkIndex(element) {\n  return element.label === this;\n}\n\nfunction calculatePrice() {\n  for (var m in DATA) {\n    DATA[m].amount = 0;\n  }\n\n  for (var plat in PLATS) {\n    for (var _m in PLATS[plat].members) {\n      DATA[_m].amount += PLATS[plat].amount / PLATS[plat].members.length;\n    }\n  }\n}\n\nvar styles = {\n  container: {\n    flex: 1\n  },\n  item: {\n    padding: 5,\n    marginHorizontal: 7,\n    marginVertical: 5\n  },\n  title: {\n    fontSize: 50,\n    justifyContent: 'space-between',\n    flex: 1,\n    flexDirection: 'row'\n  },\n  textInput: {\n    marginVertical: 10,\n    height: 40,\n    borderColor: 'gray',\n    paddingHorizontal: 10,\n    backgroundColor: 'white'\n  },\n  amountInput: {\n    marginVertical: 10,\n    height: 40,\n    borderColor: 'gray',\n    paddingHorizontal: 10,\n    backgroundColor: 'white'\n  },\n  flat_list: {\n    backgroundColor: 'gray'\n  },\n  modal: {\n    this: {\n      justifyContent: 'center',\n      alignContent: 'center'\n    },\n    first: {\n      backgroundColor: 'lightgrey',\n      marginHorizontal: 20,\n      borderRadius: 10,\n      padding: 20,\n      marginVertical: 150\n    },\n    second: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      marginVertical: 10\n    },\n    text1: {\n      textAlign: 'center',\n      fontSize: 25\n    },\n    text2: {\n      textAlign: 'center',\n      fontSize: 15\n    },\n    flat_list: {\n      borderColor: 'white',\n      borderWidth: 1,\n      borderHeight: 2,\n      marginVertical: 10,\n      maxHeight: 300\n    }\n  }\n};\nexport default Objects;","map":{"version":3,"sources":["/home/skyfighttv/Documents/GitHub/TFC/src/project/objects/Objects.js"],"names":["React","Members","DATA","refresh","CheckBox","PLATS","Objects","props","membersItem","item","styles","title","checkBox","state","members","includes","id","name","renderItem","substr","length","initModal","amount","show","setState","save","splice","calculatePrice","findIndex","checkIndex","container","modal","text1","flat_list","this","first","textInput","text","amountInput","parseFloat","text2","second","removeModal","Component","element","label","m","plat","flex","padding","marginHorizontal","marginVertical","fontSize","justifyContent","flexDirection","height","borderColor","paddingHorizontal","backgroundColor","alignContent","borderRadius","textAlign","borderWidth","borderHeight","maxHeight"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Members, {DATA, refresh} from \"../membres/Members\";\nimport {\n    View,\n    TouchableHighlight,\n    FlatList,\n    SafeAreaView,\n    Text,\n    Button,\n    Modal,\n    TextInput,\n} from \"react-native\";\nimport CheckBox from \"@react-native-community/checkbox\";\n\nexport const PLATS = [];\n\nclass Objects extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            title: \"NULL\",\n            id: 0,\n            name: \"\",\n            amount: 0,\n            members: [],\n            show: false,\n            refresh: false\n        }\n    }\n\n    initModal(title, id) {\n        this.setState({\n            title: title,\n            id: id,\n            name: PLATS.length > id ? PLATS[id].name : \"\",\n            amount: PLATS.length > id ? PLATS[id].amount : 0,\n            members: PLATS.length > id ? PLATS[id].members : [],\n            show: true,\n            refresh: !this.state.refresh\n        })\n    }\n\n    removeModal(id, save) {\n        if (save) {\n            PLATS[id] = {\n                id: id,\n                name: this.state.name,\n                amount: this.state.amount,\n                members: this.state.members\n            }\n        } else\n            PLATS.splice(id,1)\n        this.setState({\n            members: [],\n            show: false,\n            refresh: !this.state.refresh\n        })\n        calculatePrice()\n    }\n\n    checkBox(item) {\n        if (this.state.members.includes(item.id))\n            this.state.members.splice(this.state.members.findIndex(checkIndex, item.id) - 1, 1)\n        else\n            this.state.members[this.state.members.length] = item.id\n    }\n\n    membersItem = ({item}) => {\n        return (\n            <TouchableHighlight>\n                <View style={styles.title}>\n                    <CheckBox\n                        onValueChange={()=>this.checkBox(item)}\n                        value={this.state.members.includes(item.id)}\n                        style={styles.item}/>\n                    <Text style={styles.item}>{item.name}</Text>\n                </View>\n            </TouchableHighlight>\n        );\n    };\n\n    renderItem = ({item}) => {\n        let members=\"\"\n        for(let id in item.members)\n            members+=DATA[id].name+\", \"\n        members=members.substr(0, members.length-2);\n        return (\n            <TouchableHighlight onPress={()=>this.initModal(\"Modifier un plat\", item.id)}>\n                <View style={styles.title}>\n                    <Text style={styles.item}>{item.name}</Text>\n                    <Text style={styles.item}>{members}</Text>\n                    <Text style={styles.item}>{item.amount}€</Text>\n                </View>\n            </TouchableHighlight>\n        );\n    };\n\n    render() {\n        return (\n            <SafeAreaView style={styles.container}>\n                <Button title=\"Ajouté un nouveau Plat\" onPress={() =>\n                    this.initModal(\"Ajouté un plat\", PLATS.length)}/>\n                <FlatList\n                    ListEmptyComponent={\n                        <Text style={styles.modal.text1}>Aucun plats</Text>\n                    }\n                    style={styles.flat_list}\n                    data={PLATS}\n                    renderItem={this.renderItem}\n                    extraData={this.state.refresh}/>\n                <Modal\n                    presentationStyle='overFullScreen'\n                    animationType='fade'\n                    transparent={true}\n                    visible={this.state.show}\n                    style={styles.modal.this}>\n                    <View style={styles.modal.first}>\n                        <Text style={styles.modal.text1}>{this.state.title}</Text>\n                        <TextInput\n                            placeholder=\"Nom du plat\"\n                            style={styles.textInput}\n                            onChangeText={(text)=>{this.setState({name: text})}}\n                            value={this.state.name}/>\n                        <TextInput\n                            placeholder=\"Prix du plat\"\n                            keyboardType='number-pad'\n                            style={styles.amountInput}\n                            onChangeText={(text)=>{\n                                this.setState({amount: text === \"\" ? \"\" : parseFloat(text)})}}\n                            value={this.state.amount === 0 ? \"\" : this.state.amount+\"\"}/>\n                        <View>\n                            <Text style={styles.modal.text2}>Membres</Text>\n                            <FlatList\n                                ListEmptyComponent={\n                                    <Text style={styles.modal.text1}>Aucun membres</Text>\n                                }\n                                data={DATA}\n                                renderItem={this.membersItem}\n                                style={styles.modal.flat_list}\n                                extraData={this.state.refresh}/>\n                        </View>\n                        <View style={styles.modal.second}>\n                            <Button title=\"Supprimer\" onPress={()=>this.removeModal(this.state.id, false)}/>\n                            <Button title=\"Enregistrer\" onPress={()=>this.removeModal(this.state.id, true)}/>\n                        </View>\n                    </View>\n                </Modal>\n            </SafeAreaView>\n        );\n    }\n}\n\nfunction checkIndex(element) {\n    return element.label === this\n}\n\nfunction calculatePrice() {\n    for(let m in DATA)\n        DATA[m].amount=0\n\n    for(let plat in PLATS)\n        for(let m in PLATS[plat].members)\n            DATA[m].amount+=(PLATS[plat].amount/PLATS[plat].members.length)\n}\n\nconst styles = {\n    container: {\n        flex: 1\n    },\n    item: {\n        padding: 5,\n        marginHorizontal: 7,\n        marginVertical:5,\n    },\n    title: {\n        fontSize: 50,\n        justifyContent: 'space-between',\n        flex: 1,\n        flexDirection: 'row'\n    },\n    textInput: {\n        marginVertical: 10,\n        height: 40,\n        borderColor: 'gray',\n        paddingHorizontal: 10,\n        backgroundColor: 'white'\n    },\n    amountInput: {\n        marginVertical: 10,\n        height: 40,\n        borderColor: 'gray',\n        paddingHorizontal: 10,\n        backgroundColor: 'white'\n    },\n    flat_list: {\n        backgroundColor: 'gray'\n    },\n    modal: {\n        this: {\n            justifyContent: 'center',\n            alignContent: 'center'\n        },\n        first: {\n            backgroundColor: 'lightgrey',\n            marginHorizontal: 20,\n            borderRadius: 10,\n            padding: 20,\n            marginVertical: 150\n        },\n        second: {\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            marginVertical: 10\n        },\n        text1: {\n            textAlign: 'center',\n            fontSize: 25\n        },\n        text2: {\n            textAlign: 'center',\n            fontSize: 15\n        },\n        flat_list: {\n            borderColor: 'white',\n            borderWidth: 1,\n            borderHeight: 2,\n            marginVertical: 10,\n            maxHeight: 300\n        }\n    }\n};\n\nexport default Objects"]},"metadata":{},"sourceType":"module"}